[settings]
strict = true
verbose = true
debug = false

site_dir = "site"
build_dir = "build"

# Pages with other extensions are considered static assets
# and copied to build/ unchanged
page_file_extensions = ["html", "md", "rst", "adoc"]
# Drafts use .htm
ignore_extensions = ["htm"]

# Treat files as content to insert in the template,
# unless they have an <html> element in them.
generator_mode = true
complete_page_selector = "html"

default_template_file = "templates/page.html"
# The content will be inserted into its <body> element,
# before its last already existing child.
default_content_selector = "div"
default_content_action = "replace_element"

# Set the document type to HTML5, unless the page already has
# a doctype declaration.
doctype = "<!DOCTYPE html>"
keep_doctype = true
pretty_print_html = true

clean_urls = true
plugin_discovery = true
plugin_dirs = ["plugins"]

[index]
index = true
sort_by = "timestamp"
sort_type = "calendar"
sort_descending = true
# Formats: https://man7.org/linux/man-pages/man1/date.1.html
date_formats = ["%F"]

[index.fields.title]
selector = ["h1"]

[index.fields.date]
selector = ["hgroup time"]

[index.fields.timestamp]
selector = ["hgroup time"]
extract_attribute = "datetime"
fallback_to_content = false

# How an index page (e.g., site/index.html) is generated:
# HTML generated by an index.views.* is placed in the HTML tree parsed from site/index.html, inside the element selected by `index.views.*.index_selector`.
# Thus combined HTML tree is then placed in the HTML tree parsed from the default template `settings.default_template_file` (eg., templates/main.html), inside the element selected by `settings.default_content_selector`.
[index.views.main-list]
index_selector = "ul"
index_item_template = """
  <!-- 
    If I ever decide to add an excerpt for each article, then I should use:
    <article>
        <hgroup>
            <h2> title </h2>
            <p> <time datetime=""> date </time> </p>
        </hgroup>
        <p> excerpt </p>
    </article>
  -->
  
  <li>
    <p><a href="{{url}}">{{title}}</a></p>
    <p><time datetime="{{timestamp}}">{{date}}</time></p>
  </li>
  """

[widgets.page-title]
widget = "title"
selector = "h1"