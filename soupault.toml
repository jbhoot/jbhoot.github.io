[settings]
strict = true
verbose = true
debug = false

site_dir = "site"
build_dir = "build"

# Pages with other extensions are considered static assets
# and copied to build/ unchanged
page_file_extensions = ["html", "md", "rst", "adoc"]
# Drafts use .htm
ignore_extensions = ["htm", "htm~", "html~"]

# Treat files as content to insert in the template,
# unless they have an <html> element in them.
generator_mode = true
complete_page_selector = "html"

default_template_file = "templates/default.html"
# The content will be inserted into element selected by default_content_selector,
default_content_selector = "body > .with-sidebar > :last-child"

[templates.blog-post]
file = "templates/blog-post.html"
content_selector = "main"
section = "blog/"
page = ["cv.html", "cover-letter.htm"]
include_subsections = true
exclude_path_regex = '^(.*)/index\.html$'

# Set the document type to HTML5, unless the page already has
# a doctype declaration.
doctype = "<!DOCTYPE html>"
keep_doctype = true
pretty_print_html = true

clean_urls = true
plugin_discovery = true
plugin_dirs = ["plugins"]

[index]
index = true
# Treat a folder containing an index.html and a .leaf file as a normal page. This allows putting assets (e.g., images) of a page alongside itself)
# https://soupault.app/reference-manual/#treating-index-pages-as-normal-pages
leaf_file = ".leaf"
sort_by = "timestamp"
sort_type = "calendar"
sort_descending = true
# Formats: https://man7.org/linux/man-pages/man1/date.1.html
date_formats = ["%F"]

dump_json = "index.json"

[index.fields.title]
selector = ["h1"]

[index.fields.date]
selector = ["hgroup time"]

[index.fields.timestamp]
selector = ["hgroup time"]
extract_attribute = "datetime"
fallback_to_content = false

[index.fields.excerpt]
selector = ["hgroup ~ p"]

[index.fields.excerpt_2]
selector = ["hgroup ~ p + p"]

[index.views.all-posts-grid]
section = "blog/"
index_selector = ".all-posts.grid"
index_item_template = """
  <article class="box" style="--box-color-bg: var(--color-light-2);">
    <hgroup>
    <p>Published: <time datetime="{{timestamp}}">{{date}}</time></p>
    <h2><a href="{{url}}">{{title}}</a></h2>
    </hgroup>
    <p>{{excerpt}} [...]</p>
  </article>
  """

[index.views.all-posts-list]
section = "blog/"
index_selector = "ul.all-posts"
index_item_template = """
  <li>
    <a href="{{url}}" class="font-weight:600">{{title}}</a>
    <p class="margin-block-start:2px font-size:0.9em">Published: <time datetime="{{timestamp}}">{{date}}</time></p>
  </li>
  """

[index.views.recent-posts-list]
section = "blog/"
max_items = 5
index_selector = "ul.recent-posts"
index_item_template = """
  <li>
    <a href="{{url}}" class="font-weight:600">{{title}}</a>
    <p class="margin-block-start:2px font-size:0.9em">Published: <time datetime="{{timestamp}}">{{date}}</time></p>
  </li>
  """

[index.views.recent-posts-grid]
section = "blog/"
max_items = 6
index_selector = ".recent-posts.grid"
index_item_template = """
  <article class="box" style="--box-color-bg: var(--color-light-2);">
    <hgroup>
    <p>Published: <time datetime="{{timestamp}}">{{date}}</time></p>
    <h3><a href="{{url}}">{{title}}</a></h3>
    </hgroup>
    <p>{{excerpt}} [...]</p>
    <!-- <p>{{excerpt_2}} [...]</p> -->
  </article>
  """

[widgets.page-title]
widget = "title"
default = "Jayesh Bhoot's Website"
selector = ["p.title", "h1"]
append = " â€“ Jayesh Bhoot"

# Look at https://soupault.app/blog/toc/ for more options
[widgets.table-of-contents]
widget = "toc"
selector = ".toc-placeholder"
action = "replace_element"
min_level = 2
numbered_list = true
use_heading_slug = true
toc_list_class = "toc"
toc_class_levels = true

[widgets.delete_footer]
widget = "delete_element"
selector = ".draft-text"
