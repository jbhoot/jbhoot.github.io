[settings]
strict = true
verbose = true
debug = false

site_dir = "site"
build_dir = "build"

# Pages will other extensions are considered static assets
# and copied to build/ unchanged
# Drafts use .htm
page_file_extensions = ["html", "md", "rst", "adoc"]
ignore_extensions = ["htm"]

# Treat files as content to insert in the template,
# unless they have an <html> element in them.
generator_mode = true
complete_page_selector = "html"

default_template_file = "templates/main.html"
# The content will be inserted into its <main> element,
# after its last already existing child.
default_content_selector = "main"
default_content_action = "append_child"

# Set the document type to HTML5, unless the page already has
# a doctype declaration.
doctype = "<!DOCTYPE html>"
keep_doctype = true
pretty_print_html = true

clean_urls = true
plugin_discovery = true
plugin_dirs = ["plugins"]

[index]
index = true
sort_descending = true
sort_type = "calendar"
sort_by = "date"
# Formats: https://man7.org/linux/man-pages/man1/date.1.html
date_formats = ["%F"]

[index.fields.title]
selector = ["h1"]

[index.fields.date]
selector = ["header time"]
extract_attribute = "datetime"
fallback_to_content = true

[index.fields.timestamp]
selector = ["header time"]

# How an index page (e.g., site/index.html) is generated:
# HTML generated by an index.views.* is placed in the HTML tree parsed from site/index.html, inside the element selected by `index.views.*.index_selector`.
# Thus combined HTML tree is then placed in the HTML tree parsed from the default template `settings.default_template_file` (eg., templates/main.html), inside the element selected by `settings.default_content_selector`.
[index.views.main-list]
index_selector = "main"
index_template = """
  <ol>
    {% for e in entries %}
    <li>
      <h2><a href="{{e.url}}">{{e.title}}</a></h2>
      <p>{{e.timestamp}}</p>
    </li>
    {% endfor %}
  </ol>
  """
